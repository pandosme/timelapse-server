"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const class_transformer_1 = require("class-transformer");
const class_validator_1 = require("class-validator");
const base_exception_1 = require("../exceptions/base-exception");
class Dto {
    static validate(dto, data, transform) {
        const entity = class_transformer_1.plainToClass(dto, data, { strategy: "excludeAll" });
        const validationRes = class_validator_1.validateSync(entity, {});
        if (validationRes.length)
            throw new base_exception_1.BaseException(base_exception_1.BASE_CODE_VALIDATE, validationRes);
        return (transform === true)
            ? entity
            : this.toPlain(entity);
    }
    static toPlain(data) {
        return JSON.parse(JSON.stringify(data));
    }
}
exports.Dto = Dto;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHRvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi91dGlscy9kdG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5REFBK0M7QUFFL0MscURBQStDO0FBQy9DLGlFQUdzQztBQUV0QyxNQUFhLEdBQUc7SUFJUCxNQUFNLENBQUMsUUFBUSxDQUFzQixHQUFrQixFQUFFLElBQU8sRUFBRSxTQUFjO1FBQ3JGLE1BQU0sTUFBTSxHQUFHLGdDQUFZLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFDLFFBQVEsRUFBRSxZQUFZLEVBQUMsQ0FBQyxDQUFDO1FBQ2pFLE1BQU0sYUFBYSxHQUFHLDhCQUFZLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQy9DLElBQUksYUFBYSxDQUFDLE1BQU07WUFDdEIsTUFBTSxJQUFJLDhCQUFhLENBQUMsbUNBQWtCLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFFN0QsT0FBTyxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUM7WUFDekIsQ0FBQyxDQUFDLE1BQU07WUFDUixDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU8sQ0FBSSxJQUFPO1FBQzlCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUNGO0FBbEJELGtCQWtCQyJ9